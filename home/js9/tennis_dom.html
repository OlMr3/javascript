<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    * {
        box-sizing: border-box;
    }

    input {
        margin-left: 410px;
        margin-bottom: 30px;
        width: 70px;
    }

    #scoreBoard {
        margin-left: 200px;
        width: 150px;
        font-size: 55px;
        line-height: 55px;
        text-align: center;
        display: inline-block;
    }

    #playing {
        background: rgb(196, 196, 65);
        margin: 0 auto;
        position: relative;


    }

    #racket1 {
        width: 20px;
        height: 110px;
        background: green;
        position: absolute;
    }

    #ball {
        border-radius: 50%;
        width: 40px;
        height: 40px;
        background: red;
        position: absolute;
    }

    #racket2 {
        width: 20px;
        height: 110px;
        background: blue;
        position: absolute;
    }
</style>

<body>
    <input type="button" value="старт!" id="buttonStart">
    <div id="scoreBoard"></div>
    <div id="playing">
        <div id="racket1"></div>
        <div id="ball"></div>
        <div id="racket2"></div>
    </div>

    <script>
        const field = document.getElementById('playing');
        const fieldWidth = 700;
        const fieldHeight = 400;
        field.style.width = `${fieldWidth}px`;
        field.style.height = `${fieldHeight}px`;
        const startBut = document.getElementById('buttonStart')
        startBut.onclick = start;
        const scoreBoard = document.getElementById('scoreBoard');
        let score1 = 0;
        let score2 = 0;
        scoreBoardInnerHTML();
        racketWidth = 20;
        racketHeight = 110;
        ballWidth = 40;
        ballHeight = 40;
        let racketH = {
            racket1PosX: 0,
            racket1PosY: (fieldHeight - racketHeight) / 2,
            racket1Speed: 0,
            racket2PosX: fieldWidth - racketWidth,
            racket2PosY: (fieldHeight - racketHeight) / 2,
            racket2Speed: 0,
            width: 20,
            height: 110,
            update: function () {
                const racket1 = document.getElementById('racket1');
                const racket2 = document.getElementById('racket2');
                racket1.style.left = this.racket1PosX + 'px';
                racket1.style.top = this.racket1PosY + 'px';
                racket2.style.left = this.racket2PosX + 'px';
                racket2.style.top = this.racket2PosY + 'px';
            }
        };
        let racketAreaH = {
            width: 20,
            height: 400
        };
        racketH.update();
        let ballH = {
            posX: (fieldWidth - ballWidth) / 2,
            posY: (fieldHeight - ballHeight) / 2,
            speedX: 0,
            speedY: 0,
            width: 40,
            height: 40,
            update: function () {
                const ball = document.getElementById('ball');
                ball.style.left = this.posX + 'px';
                ball.style.top = this.posY + 'px';
            }
        };
        let areaH = {
            width: 700,
            height: 400
        }
        ballH.update();
        window.addEventListener('keydown', function (eo) {
            eo = eo || window.event;
            eo.preventDefault();
            if (eo.shiftKey) {
                racketH.racket1Speed = -4;
            }
            if (eo.ctrlKey) {
                racketH.racket1Speed = 4;
            }
            if (eo.code === 'ArrowUp') {
                racketH.racket2Speed = -4;
            }
            if (eo.code === "ArrowDown") {
                racketH.racket2Speed = 4;
            }
        });
        window.addEventListener('keyup', function (eo) {
            eo = eo || window.event;
            eo.preventDefault();
            if (eo.shiftKey) {
                racketH.racket1Speed = 0;
            }
            if (eo.ctrlKey) {
                racketH.racket1Speed = 0;
            }
            if (eo.code === 'ArrowUp') {
                racketH.racket2Speed = 0;
            }
            if (eo.code === "ArrowDown") {
                racketH.racket2Speed = 0;
            }
        });
        function scoreBoardInnerHTML() {
            scoreBoard.innerHTML = score1 + ':' + score2;
        };

        function start() {
            ballH.speedX = 8;
            ballH.speedY = 3;
            setInterval(tick, 1000 / 60);
        }

        function tick() {
            racketH.update();
            racketH.racket1PosY += racketH.racket1Speed;
            // вылетела ли ракетка ниже пола?
            if (racketH.racket1PosY + racketH.height > racketAreaH.height) {
                racketH.racket1PosY = racketAreaH.height - racketH.heigh;
            }
            // вылетела ли ракетка выше потолка?
            if (racketH.racket1PosY < 0) {
                racketH.racket1PosY = 0;
            }
            racketH.racket2PosY += racketH.racket2Speed;
           // вылетела ли ракетка ниже пола?
            if (racketH.racket2PosY + racketH.height > racketAreaH.height) {
                racketH.racket2PosY = racketAreaH.height - racketH.height;
            }
            if (racketH.racket2PosY < 0) {
                racketH.racket2PosY = 0;
            }
            ballH.posX += ballH.speedX;
            // вылетел ли мяч правее стены?
            if (((ballH.posY + ball.height) < racketH.racket2PosY || ballH.posY > (racketH.racket2PosY + racketH.height)) && ballH.posX + ballH.width >= field.width) {
                score1 += 1;
                scoreBoardInnerHTML();
                ballH.speedX = 0;
                ballH.speedY = 0;
                ballH.posX = field.width - ballH.width - 1;
            } else if (!(ballH.posY + ball.height < racketH.racket2PosY || ballH.posY > (racketH.racket2PosY + racketH.height)) && ballH.posX + ballH.width > (racketH.racket2PosX)) {
                ballH.speedX = - ballH.speedX;
                ballH.speedY = - ballH.speedY;
                ballH.posX = field.getBoundingClientRect().left + field.getBoundingClientRect().width - racketH.width - ballH.width;
            }
             // вылетел ли мяч левее стены?
            if ((ballH.posY + ball.height < racketH.racket1PosY || ballH.posY > (racketH.racket1PosY + racketH.height)) && ballH.posX <= 0) {
                score2 += 1;
                scoreBoardInnerHTML();
                ballH.speedX = 0;
                ballH.speedY = 0;
                ballH.posX = 1;
            } else if (!(ballH.posY + ball.height < racketH.racket1PosY || ballH.posY > (racketH.racket1PosY + racketH.height)) && ballH.posX < (racketH.width + racketH.racket1PosX)) {
                ballH.speedX = - ballH.speedX;
                ballH.speedY = - ballH.speedY;
                ballH.posX = racketH.width;
            }

            ballH.posY += ballH.speedY;
            //вылетел ли мяч ниже пола
            if (ballH.posY + ball.height > areaH.height) {
                ballH.speedY = - ballH.speedY;
                ballH.posY = areaH.height - ballH.height;
            }

            // вылетел ли мяч выше потолка?
            if (ballH.posY < 0) {
                ballH.speedY = - ballH.speedY;
                ballH.posY = 0;
            }

            ballH.update();
        }
        ballH.update();
    </script>
</body>

</html>